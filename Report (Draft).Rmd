---
title: "Stats 506 F20, Group Project"
subtitle: "ARIMA Model Tutorial"
author: "Group 3: Zhilin He, Jialun Li, Chuwen Li"
date: "`r format.Date(Sys.Date(), '%B %d, %Y')`"
output:
  html_document:
    toc: true
    theme: cerulean
---

```{r setup, include=FALSE}
# 79: -------------------------------------------------------------------------
#! We generally don't need to see the code in the results document.
knitr::opts_chunk$set(echo = FALSE)
#! Make sure all chunks have a label. This one is labelled 'setup'.
```

## Introduction

### General

Time series data can be modeled in a variety of ways. Autoregressive integrated
moving average (ARIMA) model is a common type of model used for time series 
data.

A general ARIMA model consists of three parts: the "AR" part means the variable
of interest is regressed on its lag terms, the "I" part means the differenced
values are used, and the "MA" part means the regression error is modelled as a
linear combination of error terms in the past. The purpose of using differenced
terms is to make the time series stationary for autoregression.

ARIMA models are fitted in order to understand the data better and forecast
future data. They are based on linear regression models. The best model can
be chosen using AIC or BIC.

### Mathematical Model

Given a time series \(\{X_t\}\), an \(ARIMA(p, d, q)\) model can be expressed
as: $$(1-\sum_{i=1}^p\phi_iL^i)(1-L)^dX_t=
(1+\sum_{i=1}^q\theta_iL^i)\epsilon_t + \delta$$
where \(\epsilon_t\) is the error term, \(L\) is the lag operator, i.e.
\(LX_t = X_{t-1}, \forall t>1\), \(p\) is the number of lagged terms of \(X\),
\(d\) is the number of times of differencing needed for stationarity,
\(q\) is the number of lagged forecast errors in prediction, \(\delta\)
is the interception term for the regression, and \(\theta, \phi\)'s are 
the estimated regression coefficients.

## Data Description

We use the [nifty fifty stocks data]
(https://www.kaggle.com/rohanrao/nifty50-stock-market-data) from NSE India as 
an example in this tutorial.

```{r dataset, include=FALSE}
nifty = read.csv('./NIFTY50_all.csv')
```

The data contains daily open, close, highest and lowest prices, volume and 
other relevant information for the "Nifty Fifty" stocks since January 2000. 
There are 50 stocks, 15 variables and 230104 observations in total. Detailed 
variable descriptions are shown in Table 1 below.

| Variables Name   |Variable Description     |
| ------------- |:-------------:|
| Date   | Date               |
| Symbol | Symbol of the stock (name, identifier)  |
| Series | Type of security (“EQ” for all rows)   |
| Prev Close | Previous day's close price |
| Open | Open price of day |
| High | Highest price in day |
| Low | Lowest price in day |
| Last | Last traded price in day |
| Close | Close price of day |
| VWAP | Volume Weighted Average Price |
| Volume | Volume |
| Turnover | Turnover |
| Trades | Number of Trades (Half missing) |
| Deliverable Volume | Amount of deliverable volume (7\% missing) |
| \%Deliverable | Percent of deliverable volume (7\% missing) |
<center>
**Table 1**. Variables in the dataset
</center>

Each variable other than <code>Date</code>, <code>Symbol</code> and 
<code>Series</code> is a daily time series starting from January 3rd, 2000 to
September 30th, 2020. Missing data is a problem in this dataset, so we try to
deal with missing data first. We can use ARIMA models to model these time
series data. We are going to show how to build ARIMA models in Python, R and
Stata respectively. 

As we are more interested in the stock prices, we use the variable
<code>VWAP</code> for the most part. It can summarize the average price of the
stock on a trading day. We want to catch the trend of stock prices across the
years and possibly forecast future stock prices.

## Core Example {.tabset .tabset-pills}

### Python

```{python echo=FALSE}
```

### R

### Stata

## To-do list

## Outline




<!-- ## Summary -->

## References

1. A modern Time Series tutorial:
[Link](https://www.kaggle.com/rohanrao/a-modern-time-series-tutorial)

2. ARIMA model in Wikipedia:
[Link](https://en.wikipedia.org/wiki/Autoregressive_integrated_moving_average)